import{_ as K,a as u,b as l,t as k,o,f as B,s as O,v,g as te,r as n,j as oe,C as H,w as ne,c as le,h as ce,D as m,m as S,e as b,p as x,P as V,q as F,l as re,x as ue,y as ie,z as de,F as he,A as ve,k as _e,u as pe,E as ge}from"./index-BS6Z16bI.js";import{_ as fe,a as me,g as ye,b as ke,c as Ce,D as we,E as Se,Z as be,e as xe}from"./eventBus-0Z2uCDLL.js";const Be={class:"board-info-title-container"},Te={class:"board-info-title-text"},Ie={__name:"BoardInfoTitle",props:{title:{type:String,default:"板卡信息"}},setup(f){return(C,_)=>(o(),u("div",Be,[_[0]||(_[0]=l("div",{class:"blue-block"},null,-1)),l("div",Te,k(f.title),1)]))}},es=K(Ie,[["__scopeId","data-v-7e7df7d6"]]),$e={key:0,src:fe,alt:"search icon",style:{width:"160px",height:"100px",margin:"10px"}},Le={key:1,src:me,alt:"OERC Logo"},Ne={__name:"CustomLogoIcon",setup(f){const C=B(),{isDark:_}=O(C);return(T,p)=>v(_)?(o(),u("img",Le)):(o(),u("img",$e))}},Pe={class:"main-container"},qe={class:"top-bar-container"},ze={class:"input-wrapper"},De={class:"left-section"},Re={style:{"font-size":"1.75rem","font-family":"PingFang SC-Regular"}},Ee={style:{"font-size":"1.75rem","font-family":"PingFang SC-Regular"}},Me={id:"searchDetail"},Ue=["placeholder"],He={key:0,class:"search-text",type:"button"},Ve={key:1,src:ke,alt:""},Fe={key:2,src:Ce,alt:""},Ke={key:0,class:"search-suggestions"},Oe=["onClick"],Ae={class:"suggestion-content"},Ze={class:"suggestion-name"},je={class:"right-section"},Qe={__name:"TopBackHome",props:{isBoard:{type:Boolean,default:!0}},emits:["language-change"],setup(f,{emit:C}){const _=B(),{isDark:T}=O(_),p=pe(),r=_e(),{t:I,locale:$}=te(),t=n(""),L=n(""),g=n(!1),N=n(!1),P=n(null);n({});const A=n({}),q=n(!1),d=n([]),y=n(""),w=n(null),z=n("");oe(async()=>{await G(),Z(),document.addEventListener("click",j),document.addEventListener("click",Q)});const Z=()=>{y.value=D(),w.value=setInterval(()=>{y.value=D()},5e3)},D=()=>{if(!d.value||d.value.length===0)return"";let e;do{const a=Math.floor(Math.random()*d.value.length);e=d.value[a].name}while(e===z.value&&d.value.length>1);return z.value=e,e},j=()=>{A.value={}},Q=e=>{e.target.closest(".search-container")||(g.value=!1)},G=async()=>{try{const e=await ye();d.value=e.data,await H()}catch(e){console.error("获取产品列表失败:",e)}};B().initTheme();const R=n(0),E=()=>p.push("/"),J=()=>{p.push({path:`/board/${r.params.vendor}/${r.params.product}`,query:{lang:r.query.lang}})};ne(()=>[r.path,r.query.lang],()=>{R.value+=1},{immediate:!0});const W=()=>{const e=$.value==="zh_CN"?"en_US":"zh_CN";$.value=e,ge("lang",e);let a=r.path;a.includes("zh_CN")?a=a.replace("zh_CN","en_US"):a.includes("en_US")&&(a=a.replace("en_US","zh_CN")),p.push({path:a,query:{...r.query,lang:e}}),xe.emit("languageChanged",e)},M=le(()=>{if(!t.value)return[];const e=new Set,a=[];return d.value.forEach(s=>{const h=t.value.toLowerCase();let c=null;if(s.soc&&s.soc.name&&s.soc.name.toLowerCase().includes(h)){const i=`${s.soc.vendor} ${s.soc.name}`;e.has(i)||(c={...s,displayName:i,type:"soc"},e.add(i))}else if(s.name.toLowerCase().includes(h)){const i=`${s.vendor.name} ${s.name}`;e.has(i)||(c={...s,displayName:i,type:"product"},e.add(i))}else s.vendor.name.toLowerCase().includes(h)&&(e.has(s.vendor.name)||(c={...s,displayName:s.vendor.name,type:"vendor"},e.add(s.vendor.name)));c&&a.push(c)}),a.slice(0,5)}),U=()=>{t.value&&(g.value=!1,N.value=!0,L.value=t.value),X(t.value)},X=((e,a)=>{let s=null;return(...h)=>{clearTimeout(s),s=setTimeout(()=>{e.apply(this,h)},a)}})(e=>{p.push({path:"/",query:{lang:r.query.lang,kw:e||void 0}})},300),Y=()=>{t.value||(q.value=!0,H(()=>{P.value.placeholder=y.value}))},ee=()=>{setTimeout(()=>{g.value=!1,t.value||(document.querySelector("#searchDetail"),q.value=!1)},200)},se=e=>{e.type==="soc"?t.value=e.soc.name:e.type==="vendor"?t.value=e.vendor.name:t.value=e.name,g.value=!1},ae=e=>{t.value=e.target.value,t.value||(N.value=!1,L.value="",p.replace({...r,query:{...r.query,kw:void 0}})),g.value=!0};return ce(()=>{w.value&&clearInterval(w.value)}),(e,a)=>{const s=F("el-button"),h=F("router-view");return o(),u("div",Pe,[l("div",qe,[l("div",ze,[l("div",De,[S(Ne,{class:"prefix-icon",dark:"",onClick:E}),f.isBoard?(o(),m(s,{key:0,onClick:E,icon:v(V),round:"",dark:"",class:"no-border-button"},{default:x(()=>[l("span",Re,k(v(I)("backToHome")),1)]),_:1},8,["icon"])):b("",!0),f.isBoard?b("",!0):(o(),m(s,{key:1,onClick:J,icon:v(V),round:"",dark:"",class:"no-border-button"},{default:x(()=>[l("span",Ee,k(v(I)("backToPreviousPage")),1)]),_:1},8,["icon"]))]),l("div",Me,[re(l("input",{type:"text",class:"search-input","onUpdate:modelValue":a[0]||(a[0]=c=>t.value=c),onInput:ae,onKeyup:ie(U,["enter"]),placeholder:y.value,onBlur:ee,ref_key:"searchInputRef",ref:P},null,40,Ue),[[ue,t.value]]),l("div",{class:de(["search-img",{"search-button":t.value}]),onClick:a[1]||(a[1]=c=>t.value?U():Y())},[t.value?(o(),u("button",He,"搜 索")):v(T)?(o(),u("img",Fe)):(o(),u("img",Ve))],2),g.value&&M.value.length>0?(o(),u("div",Ke,[(o(!0),u(he,null,ve(M.value,c=>(o(),u("div",{key:c.id,class:"suggestion-item",onClick:i=>se(c)},[l("div",Ae,[l("div",Ze,k(c.displayName),1)])],8,Oe))),128))])):b("",!0)]),l("div",je,[S(we),S(s,{onClick:W,dark:"",class:"no-border-button"},{default:x(()=>[v(r).query.lang==="zh_CN"?(o(),m(Se,{key:0})):(o(),m(be,{key:1}))]),_:1})])])]),(o(),m(h,{key:R.value}))])}}},ss=K(Qe,[["__scopeId","data-v-3ad5ed21"]]);export{es as B,ss as T};
